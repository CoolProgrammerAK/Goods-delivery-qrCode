<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.css" />
    <script src="https://js.stripe.com/v3/"></script>
   <link rel="stylesheet" href="../public/css/style.css">
    <title>Customer Information</title>
</head>

<body>

    <div class="container">
        <div id="head">
      <h1 class="brand" ><span>Price </span>Details </h1>
      <div  id="head2">
       <a href="/cart"> <button id="btn2">
          <i class="fa fa-cart-plus"></i> My Orders
        </button></a>
        <a href="/logout" id="head2"> <button id="btn2">
          <i class="fa fa-sign-out"></i> Logout
        </button></a>
      </div>
      

    </div>
        <div class="wrapper animated bounceInLeft">
            <div class="company-info">
                <h3>Panda Electronics</h3>
                <ul>
                    <li><i class="fa fa-map-marker"></i> 33, Rai Market, Ambala, Haryana 133004</li>
                    <li><i class="fa fa-phone"></i> (+91) 9358668593</li>
                    <li><i class="fa fa-envelope"></i> ak@gmail.com</li>
                    <li><i class="fa fa-shopping-cart"></i> Electronics and appliances</li>
                    <li>
                        <p class="no-margin"><span>&emsp;-</span>TV's,Video-Audio</p>
                    </li>
                    <li>
                        <p class="no-margin"><span>&emsp;-</span>Kitchen and Other Appliances</p>
                    </li>
                    <li>
                        <p class="no-margin"><span>&emsp;-</span>Camera and Lenses</p>
                    </li>
                    <li>
                        <p class="no-margin"><span>&emsp;-</span>Fridge</p>
                    </li>
                    <li>
                        <p class="no-margin"><span>&emsp;-</span>Mobile Phones</p>
                    </li>
                    <li>
                        <p class="no-margin"><span>&emsp;-</span>AC's</p>
                    </li>
                    <li>
                        <p class="no-margin"><span>&emsp;-</span>Washing Machine</p>
                    </li>
                </ul>
            </div>
            <div class="contact">
                <h3>Enter amount</b></h3>
<form>
                <p class="full">
                    <label>Amount (in Rupees)</label>
                    <input type="number" onchange="myFunction(this.value)"  class="Field" name="price" required>
                </p>
                <p class="full">
                    <button type="button"  id="checkout-button">Submit</button>
                </p>
</form>
            </div>
        </div>

    </div>

    <script type="text/javascript">
        // Create an instance of the Stripe object with your publishable API key
        var stripe = Stripe("pk_test_51ITLh0KqdSYTqsLlL0w18ASLnIZCxi7qOQ5sDAOAIii1KBm4WeybZtieRvrgIoWUcFaDRcomP8DltqXS4KnBJYv900KXTQ1yyL");
        var pay = document.querySelector(".Field")
   
        var checkoutButton = document.querySelector("#checkout-button");
          function myFunction(sval) {
  pay.value=sval
}
        checkoutButton.addEventListener("click", function () {
       
            if(
                pay.value){
                    checkoutButton.disabled=true
                 fetch("/create-checkout-session", {
                     headers: {
        "Content-Type": "application/json",
      },
                method: "POST",
                body:JSON.stringify({data:pay.value})

                
            })
                .then(function (response) {
                    return response.json();
                })
                .then(function (session) {
checkoutButton.disabled=false
                    return stripe.redirectToCheckout({ sessionId: session.id });
                })
                .then(function (result) {
                    checkoutButton.disabled=false
                    if (result.error) {
                        alert(result.error.message);
                    }
                })
                .catch(function (error) {
                    checkoutButton.disabled=false
                    console.error("Error:", error);
                });
            }
            else{
                alert("Enter amount")
            }
           
        });
    </script>
</body>

</html>